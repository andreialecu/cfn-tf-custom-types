{
    "typeName": "TF::NetAppCloudManager::CvoAzure",
    "description": "Provides an netapp-cloudmanager_cvo_azure resource. This can be used to create a new Cloud Volume ONTAP on Azure (Single or HA).\nRequires existence of a Cloud Manager Connector with a role assigned to create Cloud Volumes ONTAP. 'azurerm' provider can be used to create the role and role assignment.",
    "sourceUrl": "https://github.com/iann0036/cfn-tf-custom-types.git",
    "documentationUrl": "https://github.com/iann0036/cfn-tf-custom-types/blob/docs/resources/netapp-cloudmanager/TF-NetAppCloudManager-CvoAzure/docs/README.md",
    "definitions": {
        "AzureTagDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "TagKey": {
                    "type": "string"
                },
                "TagValue": {
                    "type": "string"
                }
            },
            "required": [
                "TagKey"
            ]
        }
    },
    "properties": {
        "tfcfnid": {
            "description": "Internal identifier for tracking resource changes. Do not use.",
            "type": "string"
        },
        "AllowDeployInExistingRg": {
            "type": "boolean",
            "description": "Indicates if to allow creation in existing resource group, Default is false."
        },
        "BackupVolumesToCbs": {
            "type": "boolean",
            "description": "Automatically enable back up of all volumes to Azure Blob [true, false]. The default is false."
        },
        "CapacityTier": {
            "type": "string",
            "description": "Whether to enable data tiering for the first data aggregate: ['Blob', 'NONE']. The default is 'BLOB'."
        },
        "Cidr": {
            "type": "string",
            "description": "The CIDR of the VNET."
        },
        "ClientId": {
            "type": "string",
            "description": "The client ID of the Cloud Manager Connector. You can find the ID from a previous create Connector action as shown in the example, or from the Connector tab on [https://cloudmanager.netapp.com](https://cloudmanager.netapp.com)."
        },
        "CloudProviderAccount": {
            "type": "string",
            "description": "The cloud provider credentials id to use when deploying the Cloud Volumes ONTAP system. You can find the ID in Cloud Manager from the Settings > Credentials page. If not specified, Cloud Manager uses the managed service identity of the Connector virtual machine."
        },
        "DataEncryptionType": {
            "type": "string",
            "description": "The type of encryption to use for the working environment: ['AZURE', 'NONE']. The default is 'AZURE'."
        },
        "DiskSize": {
            "type": "number",
            "description": "Azure volume size for the first data aggregate. For GB, the unit can be: [100 or 500]. For TB, the unit can be: [1,2,4,8,16]. The default is '1' ."
        },
        "DiskSizeUnit": {
            "type": "string",
            "description": "['GB' or 'TB']. The default is 'TB'."
        },
        "EnableCompliance": {
            "type": "boolean",
            "description": "Enable the Cloud Compliance service on the working environment [true, false]. The default is false."
        },
        "EnableMonitoring": {
            "type": "boolean",
            "description": "Enable the Monitoring service on the working environment [true, false]. The default is false."
        },
        "Id": {
            "type": "string"
        },
        "InstanceType": {
            "type": "string",
            "description": "The type of instance to use, which depends on the license type you chose: Explore:['Standard_DS3_v2'], Standard:['Standard_DS4_v2,Standard_DS13_v2,Standard_L8s_v2'], Premium:['Standard_DS5_v2','Standard_DS14_v2'], BYOL: all instance types defined for PayGo. For more supported instance types, refer to Cloud Volumes ONTAP Release Notes. The default is 'Standard_DS4_v2' ."
        },
        "IsHa": {
            "type": "boolean",
            "description": "Indicate whether the working environment is an HA pair or not [true, false]. The default is false."
        },
        "LicenseType": {
            "type": "string",
            "description": "The type of license to be use. For single node: ['azure-cot-explore-paygo', 'azure-cot-standard-paygo', 'azure-cot-premium-paygo', 'azure-cot-premium-byol']. For HA: ['azure-ha-cot-standard-paygo', 'azure-ha-cot-premium-paygo', 'azure-ha-cot-premium-byol']. The default is 'azure-cot-standard-paygo'."
        },
        "Location": {
            "type": "string",
            "description": "The location where the working environment will be created."
        },
        "Name": {
            "type": "string",
            "description": "The name of the Cloud Volumes ONTAP working environment."
        },
        "NssAccount": {
            "type": "string",
            "description": "The NetApp Support Site account ID to use with this Cloud Volumes ONTAP system. If the license type is BYOL and an NSS account isn't provided, Cloud Manager tries to use the first existing NSS account."
        },
        "OntapVersion": {
            "type": "string",
            "description": "The required ONTAP version. Ignored if 'use_latest_version' is set to true. The default is to use the latest version."
        },
        "PlatformSerialNumberNode1": {
            "type": "string",
            "description": "For HA BYOL, the serial number for the first node."
        },
        "PlatformSerialNumberNode2": {
            "type": "string",
            "description": "For HA BYOL, the serial number for the second node."
        },
        "ResourceGroup": {
            "type": "string",
            "description": "The resource_group where Cloud Volumes ONTAP will be created. If not provided, Cloud Manager creates the resource group (name of the working environment with suffix '-rg')."
        },
        "SecurityGroupId": {
            "type": "string",
            "description": "The name of the security group (full identifier: /subscriptions/xxxxxx/resourceGroups/rg_westus/providers/Microsoft.Network/networkSecurityGroups/CVO-SG). If not provided, Cloud Manager creates the security group."
        },
        "SerialNumber": {
            "type": "string",
            "description": "The serial number for the cluster. Required when using one of these: ['azure-cot-premium-byol' or 'azure-ha-cot-premium-byol']."
        },
        "StorageType": {
            "type": "string",
            "description": "The type of storage for the first data aggregate: ['Premium_LRS', 'Standard_LRS', 'StandardSSD_LRS']. The default is 'Premium_LRS'."
        },
        "SubnetId": {
            "type": "string",
            "description": "The name of the subnet for the Cloud Volumes ONTAP system."
        },
        "SubscriptionId": {
            "type": "string",
            "description": "The ID of the Azure subscription."
        },
        "SvmPassword": {
            "type": "string",
            "description": "The admin password for Cloud Volumes ONTAP."
        },
        "TierLevel": {
            "type": "string",
            "description": "If capacity_tier is Blob, this argument indicates the tiering level: ['normal', 'cool']. The default is: 'normal'."
        },
        "UseLatestVersion": {
            "type": "boolean",
            "description": "Indicates whether to use the latest available ONTAP version. The default is 'true'."
        },
        "VnetId": {
            "type": "string",
            "description": "The name of the virtual network."
        },
        "VnetResourceGroup": {
            "type": "string",
            "description": "The resource group in Azure associated to the virtual network."
        },
        "WorkspaceId": {
            "type": "string",
            "description": "The ID of the Cloud Manager workspace where you want to deploy Cloud Volumes ONTAP. If not provided, Cloud Manager uses the first workspace. You can find the ID from the Workspace tab on [https://cloudmanager.netapp.com](https://cloudmanager.netapp.com)."
        },
        "WritingSpeedState": {
            "type": "string",
            "description": "The write speed setting for Cloud Volumes ONTAP: ['NORMAL','HIGH']. The default is 'NORMAL'. This argument is not relevant for HA pairs."
        },
        "AzureTag": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "$ref": "#/definitions/AzureTagDefinition"
            }
        }
    },
    "additionalProperties": false,
    "required": [
        "ClientId",
        "Location",
        "Name",
        "SubnetId",
        "SubscriptionId",
        "SvmPassword",
        "VnetId"
    ],
    "readOnlyProperties": [
        "/properties/tfcfnid",
        "/properties/Id"
    ],
    "primaryIdentifier": [
        "/properties/tfcfnid"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "read": {
            "permissions": [
                "s3:GetObject"
            ]
        },
        "update": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "delete": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "list": {
            "permissions": [
                "s3:GetObject",
                "s3:ListBucket"
            ]
        }
    },
    "writeOnlyProperties": [
        "/properties/SvmPassword"
    ]
}