{
    "typeName": "TF::AzureRM::HpcCache",
    "description": "Manages a HPC Cache.\n\n~> **Note:** During the first several months of the GA release, a request must be made to the Azure HPC Cache team to add your subscription to the access list before it can be used to create a cache instance. Fill out [this form](https://aka.ms/onboard-hpc-cache) to request access.\n\n~> **Note:** By request of the service team the provider no longer automatically registering the `Microsoft.StorageCache` Resource Provider for this resource. To register it you can run `az provider register --namespace 'Microsoft.StorageCache'`.",
    "sourceUrl": "https://github.com/iann0036/cfn-tf-custom-types.git",
    "documentationUrl": "https://github.com/iann0036/cfn-tf-custom-types/blob/docs/resources/azurerm/TF-AzureRM-HpcCache/docs/README.md",
    "definitions": {
        "TagsDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "MapKey": {
                    "type": "string"
                },
                "MapValue": {
                    "type": "string"
                }
            },
            "required": [
                "MapKey",
                "MapValue"
            ]
        },
        "DefaultAccessPolicyDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "AccessRule": {
                    "type": "array",
                    "insertionOrder": false,
                    "items": {
                        "$ref": "#/definitions/AccessRuleDefinition"
                    },
                    "maxItems": 3,
                    "minItems": 1
                }
            },
            "required": []
        },
        "DirectoryActiveDirectoryDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "CacheNetbiosName": {
                    "type": "string",
                    "description": "The NetBIOS name to assign to the HPC Cache when it joins the Active Directory domain as a server."
                },
                "DnsPrimaryIp": {
                    "type": "string",
                    "description": "The primary DNS IP address used to resolve the Active Directory domain controller's FQDN."
                },
                "DnsSecondaryIp": {
                    "type": "string",
                    "description": "The secondary DNS IP address used to resolve the Active Directory domain controller's FQDN."
                },
                "DomainName": {
                    "type": "string",
                    "description": "The fully qualified domain name of the Active Directory domain controller."
                },
                "DomainNetbiosName": {
                    "type": "string",
                    "description": "The Active Directory domain's NetBIOS name."
                },
                "Password": {
                    "type": "string",
                    "description": "The password of the Active Directory domain administrator."
                },
                "Username": {
                    "type": "string",
                    "description": "The username of the Active Directory domain administrator."
                }
            },
            "required": [
                "CacheNetbiosName",
                "DnsPrimaryIp",
                "DomainName",
                "DomainNetbiosName",
                "Password",
                "Username"
            ]
        },
        "DirectoryFlatFileDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "GroupFileUri": {
                    "type": "string",
                    "description": "The URI of the file containing group information (`/etc/group` file format in Unix-like OS)."
                },
                "PasswordFileUri": {
                    "type": "string",
                    "description": "The URI of the file containing user information (`/etc/passwd` file format in Unix-like OS)."
                }
            },
            "required": [
                "GroupFileUri",
                "PasswordFileUri"
            ]
        },
        "DirectoryLdapDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "BaseDn": {
                    "type": "string",
                    "description": "The base distinguished name (DN) for the LDAP domain."
                },
                "CertificateValidationUri": {
                    "type": "string",
                    "description": "The URI of the CA certificate to validate the LDAP secure connection."
                },
                "DownloadCertificateAutomatically": {
                    "type": "boolean",
                    "description": "Whether the certificate should be automatically downloaded. This can be set to `true` only when `certificate_validation_uri` is provided. Defaults to `false`."
                },
                "Encrypted": {
                    "type": "boolean",
                    "description": "Whether the LDAP connection should be encrypted? Defaults to `false`."
                },
                "Server": {
                    "type": "string",
                    "description": "The FQDN or IP address of the LDAP server."
                },
                "Bind": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "$ref": "#/definitions/BindDefinition"
                    },
                    "maxItems": 1
                }
            },
            "required": [
                "BaseDn",
                "Server"
            ]
        },
        "DnsDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "SearchDomain": {
                    "type": "string",
                    "description": "The DNS search domain for the HPC Cache."
                },
                "Servers": {
                    "type": "array",
                    "insertionOrder": false,
                    "items": {
                        "type": "string"
                    },
                    "description": "A list of DNS servers for the HPC Cache. At most three IP(s) are allowed to set."
                }
            },
            "required": [
                "Servers"
            ]
        },
        "TimeoutsDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Create": {
                    "type": "string"
                },
                "Delete": {
                    "type": "string"
                },
                "Read": {
                    "type": "string"
                },
                "Update": {
                    "type": "string"
                }
            },
            "required": []
        },
        "AccessRuleDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Access": {
                    "type": "string"
                },
                "AnonymousGid": {
                    "type": "number"
                },
                "AnonymousUid": {
                    "type": "number"
                },
                "Filter": {
                    "type": "string"
                },
                "RootSquashEnabled": {
                    "type": "boolean"
                },
                "Scope": {
                    "type": "string"
                },
                "SubmountAccessEnabled": {
                    "type": "boolean"
                },
                "SuidEnabled": {
                    "type": "boolean"
                }
            },
            "required": [
                "Access",
                "Scope"
            ]
        },
        "BindDefinition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Dn": {
                    "type": "string"
                },
                "Password": {
                    "type": "string"
                }
            },
            "required": [
                "Dn",
                "Password"
            ]
        }
    },
    "properties": {
        "tfcfnid": {
            "description": "Internal identifier for tracking resource changes. Do not use.",
            "type": "string"
        },
        "CacheSizeInGb": {
            "type": "number",
            "description": "The size of the HPC Cache, in GB. Possible values are `3072`, `6144`, `12288`, `24576`, and `49152`. Changing this forces a new resource to be created."
        },
        "Id": {
            "type": "string"
        },
        "Location": {
            "type": "string",
            "description": "Specifies the supported Azure Region where the HPC Cache should be created. Changing this forces a new resource to be created."
        },
        "MountAddresses": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "type": "string"
            }
        },
        "Mtu": {
            "type": "number",
            "description": "The IPv4 maximum transmission unit configured for the subnet of the HPC Cache. Possible values range from 576 - 1500. Defaults to 1500."
        },
        "Name": {
            "type": "string",
            "description": "The name of the HPC Cache. Changing this forces a new resource to be created."
        },
        "NtpServer": {
            "type": "string",
            "description": "The NTP server IP Address or FQDN for the HPC Cache. Defaults to `time.windows.com`."
        },
        "ResourceGroupName": {
            "type": "string",
            "description": "The name of the Resource Group in which to create the HPC Cache. Changing this forces a new resource to be created."
        },
        "RootSquashEnabled": {
            "type": "boolean",
            "description": "Whether to enable [root squash](https://docs.microsoft.com/en-us/azure/hpc-cache/access-policies#root-squash)? Defaults to `false`."
        },
        "SkuName": {
            "type": "string",
            "description": "The SKU of HPC Cache to use. Possible values are `Standard_2G`, `Standard_4G` and `Standard_8G`. Changing this forces a new resource to be created."
        },
        "SubnetId": {
            "type": "string",
            "description": "The ID of the Subnet for the HPC Cache. Changing this forces a new resource to be created."
        },
        "Tags": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "$ref": "#/definitions/TagsDefinition"
            },
            "description": "A mapping of tags to assign to the HPC Cache."
        },
        "DefaultAccessPolicy": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DefaultAccessPolicyDefinition"
            },
            "maxItems": 1
        },
        "DirectoryActiveDirectory": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DirectoryActiveDirectoryDefinition"
            },
            "maxItems": 1
        },
        "DirectoryFlatFile": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DirectoryFlatFileDefinition"
            },
            "maxItems": 1
        },
        "DirectoryLdap": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DirectoryLdapDefinition"
            },
            "maxItems": 1
        },
        "Dns": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DnsDefinition"
            },
            "maxItems": 1
        },
        "Timeouts": {
            "$ref": "#/definitions/TimeoutsDefinition"
        }
    },
    "additionalProperties": false,
    "required": [
        "CacheSizeInGb",
        "Location",
        "Name",
        "ResourceGroupName",
        "SkuName",
        "SubnetId"
    ],
    "readOnlyProperties": [
        "/properties/tfcfnid",
        "/properties/Id",
        "/properties/MountAddresses"
    ],
    "primaryIdentifier": [
        "/properties/tfcfnid"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "read": {
            "permissions": [
                "s3:GetObject"
            ]
        },
        "update": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "delete": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "lambda:InvokeFunction"
            ]
        },
        "list": {
            "permissions": [
                "s3:GetObject",
                "s3:ListBucket"
            ]
        }
    },
    "writeOnlyProperties": [
        "/definitions/DirectoryActiveDirectoryDefinition/Password",
        "/definitions/BindDefinition/Password"
    ]
}